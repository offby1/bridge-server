{% extends "base.html" %}
{% block content %}
    <div>
        <div class="row">
            <div class="col">
                <h1>{{ hand.board }}</h1>
            </div>
            <div class="col">
                <h1>{{ hand }}</h1>
            </div>
        </div>
        <h1>
            <div id="auction-summary">Auction: {{ hand.auction.status }}</div>
        </h1>
        <h1>
            <div id="hand-summary">{{ hand.status }}</div>
        </h1>
    </div>
    <div class="col">{% include "four-hands.html" %}</div>
    <div style="display: flex;">
        <div>
            <div style="font-family: monospace;" id="bidding-box">
                {% if display_bidding_box %}{{ bidding_box_buttons }}{% endif %}
            </div>
        </div>
        <div style="flex-grow: 1">{% include "auction.html" %}</div>
    </div>
{% endblock content %}
{% block upper-right-column %}
    {% if DEPLOYMENT_ENVIRONMENT != "production" %}
        <div class="col">
            <div class="form-check form-switch">
                <input class="form-check-input"
                       type="checkbox"
                       role="switch"
                       id="god-mode-switch"
                       hx-post="{% url 'app:open-access-toggle' hand.pk %}"
                       hx-swap="none"
                       {% if hand.open_access %}checked{% endif %} />
                <label class="form-check-label" for="god-mode-switch">âœ¨GOD MODEðŸ¦„</label>
            </div>
        </div>
    {% endif %}
{% endblock upper-right-column %}
{% block scripts %}
    <script>
var handEventSource = new ReconnectingEventSource('/events/hand/{{ hand.pk }}');
console.log("Listening for hand events on {{ hand.pk }}");

handEventSource.addEventListener('message', function (e) {
    console.log("Hand event listener saw " + e.data);

    window.location.reload();
}, false);

    </script>
{% endblock scripts %}
