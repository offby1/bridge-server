{% load partials %}

{% partialdef chat-html-partial %}
<div>
  <div>
    <input type="text" id="outgoing-message" />
    <button type="button"
            onclick='postMessage(document.querySelector( "#outgoing-message" ).value)'>
      Speak to {{ chat_target }}
    </button>
  </div>
  <div>
    Chat Log
    <table id="chat-log">
      <tr>
        <th scope="col">When</th>
        <th scope="col">Who</th>
        <th scope="col">What</th>
      </tr>
      {% for message in chat_messages %}
      <tr style="border: 1px dotted">
        <td style="font-weight: lighter;
                   font-family: monospace;
                   border: 1px solid">{{ message.timestamp.isoformat }}</td>
        <td>{{ message.from_player }}</td>
        <td style="border: 1px solid">{{ message.message }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endpartialdef chat-html-partial %}
